{% extends "base.html" %}
{% block content %}
<div class="row" style="margin-bottom:10px">
  <h2 style="margin:0">{{ board.name }}</h2>
  <div class="global-stats">
    <span class="stat">Total: {{ board.columns|map(attribute='cards')|map('length')|sum }}</span>
  </div>
</div>

<div class="board">
  {% for col in board.columns %}
  <div class="col" data-col="{{ col.id }}" ondrop="dropCard(event)" ondragover="allowDrop(event)">
    <div class="col-header">
      <h3>{{ col.name }} <span class="card-count">({{ col.cards|length }})</span></h3>
      <button class="add-btn" onclick="addCard({{ col.id }})" title="Add new card">+</button>
    </div>

    <div class="drop" id="col-{{ col.id }}">
      {% for card in col.cards %}
        {% include "_card.html" %}
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>

<!-- Toast notification container -->
<div id="toast-container" class="toast-container"></div>

<!-- Loading overlay -->
<div id="loading-overlay" class="loading-overlay" style="display: none;">
  <div class="spinner"></div>
</div>
{% endblock %}
